<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300&display=swap" rel="stylesheet">
  <style media="screen">
    .box-grid {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      grid-template-rows: repeat(5, 1fr);
      height: 100vh;
    }

    .box-grid .card {
      height: 100%;
      font-size: 7rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      color: lightcoral;
      border-radius: 0px;
      box-sizing: border-box;
      min-width: 200px;
      border: 1px solid transparent;
    }

    .box-grid .card:not(.locked):hover {
      background: lightcoral;
      color: white;
      cursor: pointer;
    }

    textarea {
      display: inline-block;
      width: 100%;
      box-sizing: border-box;
      border: 0px solid transparent;
      padding: 10px;
      font-size: 2.2rem;
      background: #f0807f17;
      font-family: 'Josefin Sans', sans-serif;
      color: indianred;
    }

    textarea:focus {
      outline: 0px solid transparent;
    }

    .emojis {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 24px 0;
      margin-bottom: 13px;
    }

    .emojis img {
      width: 17%;
    }

    .modal h5 {
      font-size: 3.25rem;
      font-weight: bolder;
      color: lightcoral;
    }

    .modal img:hover {
      margin-top: -2px;
      opacity: 0.6;
      cursor: pointer;
    }

    .modal-body {
      padding-bottom: 0;
    }

    .modal-footer {
      border-top: 0px solid #e9ecef;
    }

    img.selected {
      opacity: 0.2;
    }

    .card.feeling-1 {
      /* background: #ffdede; */
    }

    .card.feeling-2 {
      /* background: #e8f9e9; */
    }

    .card.feeling-3 {
      /* background: #fff7c1; */
    }

    .card.feeling-4 {
      /* background: #fffbdf; */
    }

    .card.feeling-5 {
      /* background: darkcyan; */
    }

    .card.locked img {
      width: 55%;
      opacity: 1;
      max-width: 110px;
    }

    .card.locked.future img {
      display: none;
    }

    .card.locked.future:hover img {
      display: block;
    }

    .card.locked.future p {
      display: block;
    }

    .card.locked.future:hover p {
      display: none;
    }

    .card.locked.past p {
      width: 31px;
      height: 31px;
      background: lavenderblush;
      font-size: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @media (max-width: 1272px) {
      .box-grid {
        grid-template-columns: repeat(5, 1fr);
        height: auto;
      }

      .box-grid .card {
        height: 272px;
        min-width: 200px;
      }
    }

    @media (max-width: 1000px) {
      .box-grid {
        grid-template-columns: repeat(4, 1fr);
      }

      .box-grid .card {
        height: 200px;
        min-width: 200px;
      }
    }

    @media (max-width: 800px) {
      .box-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 600px) {
      .box-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
  <title>30 Days Challenge</title>
</head>

<body>

  {{> menu}}

  <div class="box-grid">
    {{#each box}}

      {{#if this.past}}

        <div class="card locked past feeling-{{this.feelingType}}">
          <p>{{this.number}}</p>
          <img src="{{this.feeling}}" alt="" data-linked="{{this.comment}}">
        </div>

      {{/if}}

      {{#if this.present}}

        <div class="card" data-toggle="modal" data-target="#staticBackdrop">
          <p>{{this.number}}</p>
        </div>

      {{/if}}

      {{#if this.future}}

        <div class="card locked future">
          <img src="/emojis/padlock.svg" alt="">
          <p>{{this.number}}</p>
        </div>

      {{/if}}
    {{/each}}
  </div>

  <div class="modal" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <h5>Log your Day.</h5>
          <div class="emojis">
            <img src="/emojis/depressed.svg" alt="depressed" data-linked="Kind of Failing">
            <img src="/emojis/exhausted.svg" alt="exhausted" data-linked="Really Exhausted">
            <img src="/emojis/bored.svg" alt="bored" data-linked="Kind of Bored">
            <img src="/emojis/happy.svg" alt="happy" data-linked="I am Happy">
            <img src="/emojis/flow.svg" alt="flow" data-linked="In the Flow">
          </div>
          <textarea name="name" rows="6" cols="80" placeholder="enter your today's feelings here..."></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-close" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-submit">Submit</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript">
    $(document).on('mouseenter mouseleave', '.modal img', function() {
      var text = $(this).attr('data-linked');
      $('.modal h5').text(text);
    })

    $(document).on('mouseleave', '.modal .emojis', function() {
      console.log($('img.active'));
      if ($('img.selected').length > 0) {
        var text = $('img.active').attr('data-linked');
        console.log(text);
        $('.modal h5').text(text);
        return;
      };
      $('.modal h5').text('Log your Day.');
    })

    $(document).on('click', '.modal img', function() {
      $('img').addClass('selected').removeClass('active');
      $(this).removeClass('selected').addClass('active');
      var text = $(this).attr('data-linked');
      $('.modal h5').text(text);
    })
  </script>
</body>

</html>
